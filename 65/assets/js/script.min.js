var cols,rows,scl=20,w=1400,h=1e3,flying=0,terrain=[];let song,amp;function setup(){createCanvas(windowWidth,windowHeight,WEBGL),cols=w/scl,rows=h/scl;for(var a=0;a<cols;a++){terrain[a]=[];for(var b=0;b<rows;b++)terrain[a][b]=0}song=loadSound("/sounds/experiments/65.mp3",loaded),colorMode(HSB,100),amp=new p5.Amplitude}function loaded(){song.loop()}function draw(){let a=amp.getLevel();console.log(a),flying-=0.1;for(var d,b=flying,c=0;c<rows;c++){d=0;for(var e=0;e<cols;e++)terrain[e][c]=map(noise(d,b),0,1,-200,100+10*(100*noise(d,b))*a),d+=0.2;b+=0.2}background(0),translate(0,50),rotateX(-PI/3),fill(50+50*sin(0.01*frameCount),100,100,50),translate(-w/2,-h/2);for(var c=0;c<rows-1;c++){beginShape(TRIANGLE_STRIP);for(var e=0;e<cols;e++)vertex(e*scl,c*scl,terrain[e][c]),vertex(e*scl,(c+1)*scl,terrain[e][c+1]);endShape()}}