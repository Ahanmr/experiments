let data={sketch:{background:"#00000021"},pathfinders:{n:15,counter:0}},paths=[],number,count;function setup(){createCanvas(windowWidth,windowHeight),noFill(),angleMode(DEGREES),background(0),stroke(200,0,0,200),smooth();for(var a=0,b=data.pathfinders.n;a<b;a+=1)paths.push(new Pathfinder)}function draw(){for(var a=0,b=paths.length;a<b;a+=1){let c=paths[a].location,d=paths[a].lastLocation;strokeWeight(paths[a].diameter),line(d.x,d.y,c.x,c.y),paths[a].update()}0==frameCount%10&&reinit()}function mousePressed(){background(data.sketch.background),count=data.pathfinders.counter,number=data.pathfinders.n,paths=[];for(var a=0,b=data.pathfinders.n;a<b;a+=1)paths.push(new Pathfinder)}function reinit(){background(data.sketch.background),count=data.pathfinders.counter,number=data.pathfinders.n,paths=[];for(var a=0,b=data.pathfinders.n;a<b;a+=1)paths.push(new Pathfinder)}class Pathfinder{constructor(a=0.5*width,b=height){this.location=new p5.Vector(a,b),this.lastLocation=new p5.Vector(this.location.x,this.location.y),this.velocity=new p5.Vector(0,-10),this.diameter=random(1,4),this.isFinished=!1}parent(a){this.location=a.location,this.lastLocation=a.lastLocation,this.velocity=a.velocity,this.diameter=0.62*a.diameter,this.isFinished=a.isFinished,a.diameter=this.diameter}update(){if(-10<this.location.x&&this.location.x<width+10&&-10<this.location.y&&this.location.y<height+10&&(this.lastLocation.set(this.location.x,this.location.y),1<this.diameter)){count++;let a=new p5.Vector(random(-0.7,0.7),random(-0.1,0));if(a.mult(2),this.velocity.normalize(),this.velocity.mult(3),this.velocity.add(a),this.velocity.mult(random(0,20)),this.location.add(this.velocity),0.3>random(0,1)){let b=new Pathfinder;b.parent(this),paths.push(b)}else if(!this.isFinished){this.isFinished=!0,noStroke(),fill(220,230,30,30);let b=random(10,20);ellipse(this.location.x,this.location.y,b,b),stroke(255,70,40,200)}}}}