(function(){function a(){n=[];for(var o=1,p=h.arrow.cols;o<p;o+=1)for(var q=1,r=h.arrow.rows;q<r;q+=1)n.push(new m(o,q,h.arrow.spacing))}function b(){d.clearRect(0,0,f,g),d.fillStyle=h.background,d.fillRect(0,0,f,g);for(var o=0,p=n.length;o<p;o+=1)n[o].show();requestAnimationFrame(b)}let c=document.getElementById("canvas"),d=c.getContext("2d"),f=c.width=window.innerWidth,g=c.height=window.innerHeight,h={background:"#FFFFFF",arrow:{spacing:48,size:8,rows:Math.floor(window.innerHeight/48),cols:Math.floor(window.innerWidth/48),counter_speed:0.01,pointy:!0,stroke_style:"#000000"}};var k;(()=>{k=new ControlKit,k.addPanel({fixed:!1,label:"Controls"}).addColor(h,"background",{label:"Background"}).addSubGroup({label:"Vector Field Controls"}).addColor(h.arrow,"stroke_style",{label:"Color"}).addNumberInput(h.arrow,"size",{label:"Size"}).addNumberInput(h.arrow,"spacing",{label:"Spacing"}).addNumberInput(h.arrow,"rows",{label:"Rows",onChange:function(){a()}}).addNumberInput(h.arrow,"cols",{label:"Columns",onChange:function(){a()}}).addCheckbox(h.arrow,"pointy",{label:"Pointy Vectors?"})})();class m{constructor(o,p,q){this.x=h.arrow.spacing*o,this.y=h.arrow.spacing*p,this.i=o,this.j=p,this.spacing=q,this.dx,this.dy,this.angle=0}show(){this.spacing=h.arrow.spacing,this.x=h.arrow.spacing*this.i,this.y=h.arrow.spacing*this.j,d.save(),d.translate(this.x,this.y),d.rotate(this.angle),d.beginPath(),d.moveTo(h.arrow.size,0),d.lineTo(-h.arrow.size,0),d.moveTo(h.arrow.size,0),h.arrow.pointy&&(d.lineTo(h.arrow.size/2,-h.arrow.size/2),d.moveTo(h.arrow.size,0),d.lineTo(h.arrow.size/2,h.arrow.size/2)),d.strokeStyle=h.arrow.stroke_style,d.stroke(),d.restore()}mouseUpdate(o){this.dx=o.clientX-this.x,this.dy=o.clientY-this.y,this.angle=Math.atan2(this.dy,this.dx)}}let n=[];a(),b(),document.body.addEventListener("mousemove",function(o){for(var p=0,q=n.length;p<q;p+=1)n[p].mouseUpdate(o)},!0)})();