let data={sketch:{background:"#FFFFFF"}},separator;function setup(){createCanvas(windowWidth,windowHeight),separator=new Separator,noFill()}function draw(){background(255),0==frameCount%10&&mouseX<0.5*width&&separator.init(),separator.show()}class Separator{constructor(a=0.5*width){this.x=a,this.slits=[new Slit(a,0.335*height),new Slit(a,0.685*height)],this.waves=[]}init(){this.waves.push(new Bar)}takeout(){this.waves.forEach((a,b)=>{a.position.x>0.25*width&&this.waves.splice(b,1),this.waves.clean(void 0),this.waves.clean(null)})}show(){push(),strokeWeight(5),strokeCap(SQUARE),line(0.5*width,0,0.5*width,0.32*height),line(0.5*width,0.35*height,0.5*width,0.67*height),line(0.5*width,0.7*height,0.5*width,height),pop(),this.takeout(),0<this.waves.length&&this.waves.forEach(a=>{a.update(),a.show()}),this.slits.forEach(a=>{0==frameCount%5&&0<this.waves.length&&this.waves[0].position.x>=0.24*width&&a.insert(),a.emit()})}}class Slit{constructor(a,b){this.position=new p5.Vector(a,b),this.semicircles=[]}insert(){this.semicircles.push(new Semicircle(this.position.x,this.position.y))}takeout(){this.semicircles.forEach((a,b)=>{a.r>2*height&&this.semicircles.splice(b,1),this.semicircles.clean(void 0),this.semicircles.clean(null)})}emit(){this.semicircles.forEach(a=>{a.update(),a.show(),this.takeout()})}}class Semicircle{constructor(a,b){this.position=new p5.Vector(a,b),this.r=0}show(){push(),fill(0,3),translate(this.position.x,this.position.y),arc(0,0,2*this.r,2*this.r,-HALF_PI,HALF_PI),pop()}update(){this.r=lerp(this.r,this.r+5,0.7)}}class Bar{constructor(){this.position=new p5.Vector}show(){push(),translate(this.position.x,this.position.y),line(this.position.x,0,this.position.x,height),pop()}update(){this.position.x=lerp(this.position.x,this.position.x+5,0.6)}}Array.prototype.clean=function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this};