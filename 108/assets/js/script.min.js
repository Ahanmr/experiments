let data={sketch:{background:"#000000"},grid:{columns:100,rows:50}},board;function setup(){createCanvas(windowWidth,windowHeight),board=new Board(width,height),board.init(),colorMode(HSB,100)}function mousePressed(){board.init()}function draw(){background(data.sketch.background),board.run()}class Board{constructor(a,c){this.w=a/data.grid.columns,this.h=c/data.grid.rows,this.grid=[]}init(){this.grid=[];for(var a=0;a<data.grid.columns;a+=1){this.grid[a]=[];for(var c=0;c<data.grid.rows;c+=1)this.grid[a][c]=new Cell(a,c,this.w,this.h)}}run(){this.update(),this.show()}show(){for(var a=0;a<this.grid.length;a+=1)for(var c=0;c<this.grid[a].length;c+=1)this.grid[a][c].run()}update(){for(var a=0;2>a;a+=1)for(var c=0;c<this.grid.length;c+=1)for(var d=0;d<this.grid[c].length;d+=1){let e=0;0<c&&0<d&&c<data.grid.columns-1&&d<data.grid.rows-1&&(e+=this.grid[c-1][d-1].returnState(),e+=this.grid[c-1][d].returnState(),e+=this.grid[c-1][d+1].returnState(),e+=this.grid[c][d-1].returnState(),e+=this.grid[c][d+1].returnState(),e+=this.grid[c+1][d-1].returnState(),e+=this.grid[c+1][d].returnState(),e+=this.grid[c+1][d+1].returnState()),this.grid[c][d].neighbors=e,this.grid[c][d].alive?(2>e&&(this.grid[c][d].alive=!1),3<e&&(this.grid[c][d].alive=!1)):3==e&&(this.grid[c][d].alive=!0)}}}class Cell{constructor(a,c,d,e){this.i=a,this.j=c,this.w=d,this.h=e,this.x=a*d,this.y=c*e,this.alive=0.96>random(1),this.neighbors=0}run(){this.clicked(),this.show()}returnState(){return this.alive?1:0}show(){push(),stroke(0);let a=map(this.neighbors,0,8,30,60),c=map(this.neighbors,0,8,0,100),d=map(this.neighbors,0,8,0,100);fill(a,c,d),rect(this.x,this.y,this.w-1,this.h-1),pop()}clicked(){mouseX>this.x&&mouseX<this.x+this.w-1&&mouseY>this.y&&mouseY<this.y+this.h-1&&(this.alive=!this.alive)}}