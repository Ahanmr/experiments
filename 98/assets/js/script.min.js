let data={sketch:{background:{color:"#FFFFFF",a:10},color_mode:["RGB","HSB"]},circle:{stroke:{color:"#000000",a:190},r:0.2*window.innerWidth,spacing:1,toMorphto:3,animation_speed:{x:3,y:3},shape_factors:{a:{x:2,y:2},b:{x:3,y:3},c:{x:0.5,y:0.5}}}};var controlkit,createControlKit=()=>{controlkit=new ControlKit,controlkit.addPanel({fixed:!1,label:"Controls"}).addSubGroup({label:"Background Settings"}).addColor(data.sketch.background,"color",{colorMode:"hex",label:"Background Color"}).addNumberInput(data.sketch.background,"a",{label:"Opacity",step:1,dp:2}).addSubGroup({label:"Click to observe Effect"}).addNumberInput(data.circle,"spacing",{label:"Point Spacing",step:1,dp:2}).addNumberInput(data.circle,"toMorphto",{label:"Target Polygon Vertices",step:1,dp:1}).addNumberInput(data.circle,"r",{label:"Radius of Circle",step:1,dp:2}).addSubGroup({label:"Dynamic Settings"}).addNumberInput(data.circle.animation_speed,"x",{label:"X Lerp Animation Speed",step:0.1,dp:2}).addNumberInput(data.circle.shape_factors.a,"x",{label:"X Lerp Factor A",step:0.01,dp:2}).addNumberInput(data.circle.shape_factors.b,"x",{label:"X Lerp Factor B",step:0.01,dp:2}).addNumberInput(data.circle.shape_factors.c,"x",{label:"X Lerp Factor C",step:0.01,dp:2}).addNumberInput(data.circle.animation_speed,"y",{label:"Y Lerp Animation Speed",step:0.1,dp:2}).addNumberInput(data.circle.shape_factors.a,"y",{label:"Y Lerp Factor A",step:0.01,dp:2}).addNumberInput(data.circle.shape_factors.b,"y",{label:"Y Lerp Factor B",step:0.01,dp:2}).addNumberInput(data.circle.shape_factors.c,"y",{label:"Y Lerp Factor C",step:0.01,dp:2}).addColor(data.circle.stroke,"color",{colorMode:"hex",label:"Stroke Color"}).addNumberInput(data.circle.stroke,"a",{label:"Opacity",step:1,dp:2})};createControlKit();let circlePath=[],trianglePath=[];function polarToCartesian(b,c){return createVector(b*cos(c),b*sin(c))}function mousePressed(){circlePath=[],trianglePath=[];let b=0,c=360/data.circle.toMorphto,d=polarToCartesian(data.circle.r,b),e=polarToCartesian(data.circle.r,c);if(0!==data.circle.spacing)for(var f=b;360>f;f+=abs(data.circle.spacing)){let g=data.circle.r*cos(f),h=data.circle.r*sin(f),j=new p5.Vector(g,h);circlePath.push(j);let k=f%(360/data.circle.toMorphto)/(c-b),l=p5.Vector.lerp(d,e,k);trianglePath.push(l),0==(f+data.circle.spacing)%(360/data.circle.toMorphto)&&(b+=360/data.circle.toMorphto,c+=360/data.circle.toMorphto,d=polarToCartesian(data.circle.r,b),e=polarToCartesian(data.circle.r,c))}}function setup(){let b=createCanvas(0.75*windowWidth,windowHeight);b.id("canvas"),angleMode(DEGREES),background(255),strokeWeight(1);let c=0,d=360/data.circle.toMorphto,e=polarToCartesian(data.circle.r,c),f=polarToCartesian(data.circle.r,d);for(var g=c;360>g;g+=data.circle.spacing){let h=data.circle.r*cos(g),j=data.circle.r*sin(g),k=new p5.Vector(h,j);circlePath.push(k);let l=g%(360/data.circle.toMorphto)/(d-c),m=p5.Vector.lerp(e,f,l);trianglePath.push(m),0==(g+data.circle.spacing)%(360/data.circle.toMorphto)&&(c+=360/data.circle.toMorphto,d+=360/data.circle.toMorphto,e=polarToCartesian(data.circle.r,c),f=polarToCartesian(data.circle.r,d))}}function draw(){colorMode(data.sketch.color_mode),background(red(data.sketch.background.color),green(data.sketch.background.color),blue(data.sketch.background.color),abs(data.sketch.background.a)),translate(0.5*width,0.5*height),stroke(50+50*sin(frameCount),100,100,30),strokeWeight(1),stroke(red(data.circle.stroke.color),green(data.circle.stroke.color),blue(data.circle.stroke.color),abs(data.circle.stroke.a)),noFill(),push(),rotate(30+frameCount);let b=(data.circle.shape_factors.a.x*sin(frameCount*data.circle.animation_speed.x)+data.circle.shape_factors.b.x)*data.circle.shape_factors.c.x,c=(data.circle.shape_factors.a.y*sin(frameCount*data.circle.animation_speed.y)+data.circle.shape_factors.b.y)*data.circle.shape_factors.c.y;beginShape();for(var d=0;d<circlePath.length;d+=1){let e=circlePath[d],f=trianglePath[d],g=lerp(e.x,f.x,b),h=lerp(e.y,f.y,c);curveVertex(g,h),push(),strokeWeight(1),point(g,h),pop()}endShape(CLOSE),pop()}