var particles=[],smallCircles=[],bigCircle,data={nsmall:13,diasmall:30,diabig:300,speed:200,alternatepaths:!1,clockwise:!0,showline:!0,showbigcircle:!0,showsmallcircle:!0},controlkit;function createControlKit(){controlkit=new ControlKit,controlkit.addPanel({label:"Control Panel",width:300,fixed:!1}).addNumberInput(data,"nsmall",{label:"Small Circles ",onChange:function(){createCircles()}}).addNumberInput(data,"diasmall",{label:"Radius (small) ",onChange:function(){createCircles()}}).addNumberInput(data,"diabig",{label:"Radius (Big) ",onChange:function(){createCircles()}}).addNumberInput(data,"speed",{label:"Speed",onChange:function(){createCircles()}}).addCheckbox(data,"clockwise",{label:"Clockwise?",onChange:function(){createCircles()}}).addCheckbox(data,"alternatepaths",{label:"Alternate Spin?",onChange:function(){createCircles()}}).addCheckbox(data,"showline",{label:"Show lines?",onChange:function(){createCircles()}}).addCheckbox(data,"showbigcircle",{label:"Show Big Circle?",onChange:function(){createCircles()}}).addCheckbox(data,"showsmallcircle",{label:"Show Small Circles?",onChange:function(){createCircles()}})}function CircularThing(a,b,c,d=0,e=0){this.cx=a,this.cy=b,this.r=c,this.phi=e,this.x,this.y,this.theta=0,this.show=function(){stroke(0),noFill(),strokeWeight(1),ellipse(this.cx,this.cy,this.r,this.r),this.x=this.cx+this.r*Math.cos(this.theta+this.phi),this.y=this.cy+this.r*Math.sin(this.theta)},this.incrementTheta=function(){this.theta+=d,this.x=this.cx+this.r*Math.cos(this.theta+this.phi),this.y=this.cy+this.r*Math.sin(this.theta+this.phi)}}function PointOnCircle(a,b,c,d=!0,e=0){this.r=c,this.cx=a,this.cy=b,this.x,this.y,this.speed=map(data.speed,0,200,0,0.1),this.theta=0,this.phi=e,this.show=function(){stroke(0),strokeWeight(1),this.x=this.cx+this.r*Math.cos(this.theta+this.phi),this.y=this.cy+this.r*Math.sin(this.theta+this.phi),point(this.x,this.y)},this.update=function(){this.x=this.cx+this.r*Math.cos(this.theta+this.phi),this.y=this.cy+this.r*Math.sin(this.theta+this.phi),d?this.theta+=this.speed:this.theta-=this.speed}}function createCircles(){bigCircle=new CircularThing(0,0,data.diabig,2*PI/data.nsmall),bigCircle.theta=2*PI/data.nsmall,smallCircles=[],particles=[];for(var a=0;a<data.nsmall;a+=1)bigCircle.incrementTheta(),smallCircles[a]=new CircularThing(bigCircle.x/2,bigCircle.y/2,data.diasmall),particles[a]=new PointOnCircle(smallCircles[a].cx,smallCircles[a].cy,data.diasmall/2,data.clockwise,a),data.alternatepaths&&0==a%2&&(particles[a].speed*=-1)}function setup(){createCanvas(windowWidth,windowHeight),createControlKit(),createCircles()}function draw(){if(background(255),translate(windowWidth/2,windowHeight/2),data.showbigcircle&&bigCircle.show(),strokeWeight(1),data.showsmallcircle)for(var a=0;a<smallCircles.length;a+=1)smallCircles[a].show();for(var a=0;a<smallCircles.length;a+=1)particles[a].show(),particles[a].update();for(var a=0;a<particles.length;a+=1)for(var b=0;b<particles.length;b+=1)a!=b&&a>b&&(strokeWeight(1),data.showline&&line(particles[a].x,particles[a].y,particles[b].x,particles[b].y));strokeWeight(10)}function windowResized(){resizeCanvas(windowWidth,windowHeight)}