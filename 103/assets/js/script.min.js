let data={sketch:{background:"#30B4DC"},fractal:{radius:200,points:3}},snowflake=[];function setup(){if(createCanvas(windowWidth,windowHeight),angleMode(DEGREES),stroke(255),0<data.fractal.points)for(var f=0;360>f;f+=360/data.fractal.points){let g=data.fractal.radius*cos(f),h=data.fractal.radius*sin(f),i=data.fractal.radius*cos(f+360/data.fractal.points),j=data.fractal.radius*sin(f+360/data.fractal.points);snowflake.push(new Koch(g,h,i,j))}}function draw(){background(data.sketch.background),push(),noStroke(),fill(0),textSize(16),text("Click to reset",0.05*width,0.1*height),text("Press any key to generate",0.05*width,0.13*height),pop(),translate(0.5*width,0.5*height),snowflake.forEach(f=>{f.show()})}let pressed=0;function keyPressed(){if(snowflake=[],pressed=0,0<data.fractal.points)for(var f=0;360>f;f+=360/data.fractal.points){let g=data.fractal.radius*cos(f),h=data.fractal.radius*sin(f),i=data.fractal.radius*cos(f+360/data.fractal.points),j=data.fractal.radius*sin(f+360/data.fractal.points);snowflake.push(new Koch(g,h,i,j))}}function mousePressed(){pressed+=1,6>=pressed&&snowflake.forEach(f=>{f.generate()})}class Koch{constructor(f,g,h,i){this.generation=0,this.start=new p5.Vector(f,g),this.end=new p5.Vector(h,i),this.array=[new Line(this.start,this.end)]}show(){this.array.forEach(f=>{f.show()})}generate(){let f=[];this.array.forEach(g=>{let h=g.start,i=g.end,j=new p5.Vector((2*h.x+i.x)/3,(2*h.y+i.y)/3),k=new p5.Vector((2*i.x+h.x)/3,(2*i.y+h.y)/3),l=p5.Vector.sub(k,j);l.rotate(-radians(60));let m=p5.Vector.add(j,l);f.push(new Line(h,j)),f.push(new Line(j,m)),f.push(new Line(m,k)),f.push(new Line(k,i))}),this.array=f}}class Line{constructor(f,g){this.start=f,this.end=g}show(){push(),line(this.start.x,this.start.y,this.end.x,this.end.y),pop()}}