var controlkit;let data={amplitude:{xp:300,yp:300},speed:{xp:0.1,yp:0.1},phi:{xp:360,yp:0},color:{Line:"#000",Point:"#E82107",Trail:"#223344"},point:{ratio:{m1:4,m2:3}},trail:{limit:800}};var createControlKit=()=>{controlkit=new ControlKit,controlkit.addPanel({fixed:!1,opacity:0.9}).addSubGroup({label:"Line Controls"}).addNumberInput(data.amplitude,"xp",{label:"X-anchor's Amplitude",step:1}).addNumberInput(data.speed,"xp",{label:"X-anchor's Speed",step:0.1}).addNumberInput(data.phi,"xp",{label:"X-anchor's Initial Phase",step:1}).addNumberInput(data.amplitude,"yp",{label:"Y-anchor's Amplitude",step:1}).addNumberInput(data.speed,"yp",{label:"Y-anchor's Speed",step:0.1}).addNumberInput(data.phi,"yp",{label:"Y-anchor's Initial Phase",step:1}).addColor(data.color,"Line",{colorMode:"hex",label:"Line Color"}).addSubGroup({label:"Point Controls"}).addNumberInput(data.point.ratio,"m1",{label:"Proximity with X anchor",step:0.1}).addNumberInput(data.point.ratio,"m2",{label:"Proximity with Y anchor",step:0.1}).addColor(data.color,"Point",{colorMode:"hex",label:"Point Color"}).addSubGroup({label:"Point Trail Controls"}).addColor(data.color,"Trail",{colorMode:"hex",label:"Trail Color"})};class SHMPoint{constructor(a){this.axis=a,this.x=0,this.y=0,this.theta=0,this.phi=0,this.amplitude=0,this.speed=0}show(){strokeWeight(1),point(this.x,this.y),strokeWeight(1),"Y"==this.axis&&(this.y=this.amplitude*Math.sin(degrees(this.theta)+degrees(this.phi)),this.phi=data.phi.yp),"X"==this.axis&&(this.x=this.amplitude*Math.sin(degrees(this.theta)+degrees(this.phi)),this.phi=data.phi.xp)}update(){"Y"==this.axis&&(this.amplitude=data.amplitude.yp,this.speed=data.speed.yp,this.theta=lerp(this.theta,this.theta+this.speed,0.1),this.y=this.amplitude*Math.sin(this.theta+this.phi)),"X"==this.axis&&(this.amplitude=data.amplitude.xp,this.speed=data.speed.xp,this.theta=lerp(this.theta,this.theta+this.speed,0.1),this.x=this.amplitude*Math.sin(this.theta+this.phi))}}let xp,yp,trail=[];class TrailPoint{constructor(a,b,c){this.x=a,this.y=b,this.color=c}show(a=null){null===a?line(this.x,this.y,this.x,this.y):(stroke(this.color),strokeWeight(1),line(this.x,this.y,a.x,a.y))}}var setup=()=>{createCanvas(windowWidth,windowHeight),yp=new SHMPoint("Y"),xp=new SHMPoint("X")},draw=()=>{background(255),translate(width/2,height/2),scale(1,-1),line(-width/2,0,width/2,0),line(0,-height/2,0,height/2),xp.show(),yp.show(),xp.update(),yp.update(),stroke(data.color.Line),strokeWeight(2),line(xp.x,xp.y,yp.x,yp.y),strokeWeight(1),stroke(0);var a=data.point.ratio.m1,b=data.point.ratio.m2,c=(a*yp.x+b*xp.x)/(a+b),d=(a*yp.y+b*xp.y)/(a+b);strokeWeight(8),stroke(data.color.Point),point(c,d),trail.push(new TrailPoint(c,d,data.color.Trail));for(var e=0,f=trail.length;e<f;e+=1)0<e&&trail[e].show(trail[e-1]);data.trail.limit<trail.length&&trail.splice(0,1),strokeWeight(1),stroke(0)},windowResized=()=>{resizeCanvas(windowWidth,windowHeight)};createControlKit();