let data={sketch:{background:"#FFFFFF",camera:{x:0,y:0,z:0,animate:!1}},trail:{color:"#000000",limit:300},body:{r_multipler:{three:4,two:10},force_constant:1e4,mass:5,initial_position:{x:0,y:30,z:0},initial_velocity:{x:0,y:0,z:0}},rings:{n:80,r:300,body:{r_multipler:{three:4,two:10}},lambda:1}};var controlkit,createControlKit=()=>{controlkit=new ControlKit,controlkit.addPanel({fixed:!0,label:"Controls",align:"right"}).addColor(data.sketch,"background",{colorMode:"hex",label:"Background Color"}).addNumberInput(data.body,"mass",{label:"Q : Point Charge",step:0.1,dp:1}).addNumberInput(data.rings,"r",{label:"Ring's Radius",step:1,dp:1}).addNumberInput(data.rings,"lambda",{label:"Ring's \u03BB",step:1,dp:1}).addSubGroup({label:"Initial Conditions"}).addNumberInput(data.body.initial_position,"x",{label:"Position x",step:1,dp:1}).addNumberInput(data.body.initial_position,"y",{label:" Position y",step:1,dp:1}).addNumberInput(data.body.initial_position,"z",{label:"Position z",step:1,dp:1}).addNumberInput(data.body.initial_velocity,"x",{label:"Velocity x",step:1,dp:1}).addNumberInput(data.body.initial_velocity,"y",{label:" Velocity y",step:1,dp:1}).addNumberInput(data.body.initial_velocity,"z",{label:"Velocity z",step:1,dp:1}).addSubGroup({label:"Camera Controls"}).addNumberInput(data.sketch.camera,"x",{label:"Position x",step:10,dp:1}).addNumberInput(data.sketch.camera,"y",{label:" Position y",step:10,dp:1}).addNumberInput(data.sketch.camera,"z",{label:"Position z",step:1,dp:1}).addButton("Animate",function(){data.sketch.camera.animate=!data.sketch.camera.animate}).addSubGroup({label:"Reset Sketch"}).addButton("Reset",function(){reinitialize()})},point,ring,forces=[],fnet;let trail=[];function setup(){createCanvas(0.75*windowWidth,windowHeight,WEBGL),reinitialize(),console.log("Ratios determine the motion here, not the actual values observed!")}function draw(){if(background(data.sketch.background),scale(1,-1),data.sketch.camera.animate&&(rotateX(0.01*frameCount),rotateY(0.01*frameCount)),camera(data.sketch.camera.x,data.sketch.camera.y,data.sketch.camera.z),mouseX<width&&orbitControl(),ring&&point){ring.update(),ring.display(),forces=[],ring.bodies.forEach(c=>{forces.push(point.calculateForce(c))}),fnet=point.netForce(forces),point.applyForce(fnet),point.display3D(),point.update(),trail.push(new TrailPoint(point.position.x,point.position.y,point.position.z,data.trail.color));for(var a=0,b=trail.length;a<b;a+=1)0<a&&trail[a].show(trail[a-1]);data.trail.limit<trail.length&&trail.splice(0,1)}}createControlKit();function reinitialize(){point=null,ring=null,fnet=0,forces=[],trail=[],point=new Body(data.body.initial_position.x,data.body.initial_position.y,data.body.initial_position.z,data.body.mass,0),ring=new Ring(0,0,0),ring.initialize()}