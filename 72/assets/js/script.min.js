let settings={sketch:{background:"#BBBBBB"},data:{draw:{onmousedragged:!0},size:10,fill:{check:!0,color:"#222222"},stroke:{check:!1,color:"#000000",weight:1}},line:{m:1,b:0,weight:2,color:"#000000"}},data=[];function setup(){let a=createCanvas(windowWidth,windowHeight);a.parent("#container"),a.id("canvas")}function draw(){background(settings.sketch.background);for(var a=0,b=data.length;a<b;a+=1){let c=map(data[a].x,0,1,0,width),d=map(data[a].y,0,1,0,height);showData(c,d)}1<data.length&&(linearRegression(),drawLine())}var linearRegression=()=>{let a=0,b=0;for(var c=0,d=data.length;c<d;c+=1)a+=data[c].x,b+=data[c].y;let e=a/data.length,f=b/data.length,g=0,h=0;for(var c=0,d=data.length;c<d;c+=1){let j=data[c].x,k=data[c].y;g+=(j-e)*(k-f),h+=(j-e)*(j-e)}settings.line.m=g/h,settings.line.b=f-settings.line.m*e},drawLine=()=>{let a=0,b=settings.line.m*a+settings.line.b,c=1,d=settings.line.m*c+settings.line.b;a=map(a,0,1,0,width),b=map(b,0,1,0,height),c=map(c,0,1,0,width),d=map(d,0,1,0,height),push(),stroke(settings.line.color),strokeWeight(settings.line.weight),line(a,b,c,d),pop()},showData=(a,b)=>{settings.data.fill.check?fill(settings.data.fill.color):noFill(),settings.data.stroke.check?(stroke(settings.data.stroke.color),strokeWeight(settings.data.stroke.weight)):noStroke(),ellipse(a,b,settings.data.size)},mouseDragged=()=>{let a=map(mouseX,0,width,0,1),b=map(mouseY,0,height,0,1),c=createVector(a,b);data.push(c)},mousePressed=()=>{let a=map(mouseX,0,width,0,1),b=map(mouseY,0,height,0,1),c=createVector(a,b);data.push(c)};