let data={sketch:{background:"#FF00FF",opacity:10},blobs:{size:2,number:200,sticks:60}},blobs_1=[],blobs_2=[],blobs_3=[];function setup(){createCanvas(windowWidth,windowHeight),angleMode(DEGREES),ellipseMode(CENTER);for(var a=0;a<data.blobs.number;a+=1)blobs_1.push(new Blob(random(0.32*width),random(0.1*height,height))),blobs_2.push(new Blob(random(0.33*width,0.66*width),random(0.1*height,height))),blobs_3.push(new Blob(random(0.7*width,width),random(0.1*height,height)));colorMode(HSB,100),noStroke(),textSize(13),textAlign(CENTER,CENTER)}function draw(){background(red(data.sketch.background),green(data.sketch.background),blue(data.sketch.background),data.sketch.opacity),push(),stroke(0),strokeWeight(2),line(0,0.1*height,width,0.1*height),line(0.33*width,0,0.33*width,height),line(0.66*width,0,0.66*width,height),pop();for(var a=0;a<data.blobs.number;a+=1){blobs_1[a].run(),blobs_2[a].run(),blobs_3[a].run();for(var b=0;b<data.blobs.number;b+=1)blobs_1[a].collide(blobs_1[b]),blobs_2[a].collide(blobs_2[b]),blobs_3[a].collide(blobs_3[b])}push(),fill(0),rect(0,0,width,0.1*height),noStroke(),fill(255),push(),translate(0.15*width,0.05*height),text("Collision Detection : Without Momentum & Energy Conservation",0,0),pop(),push(),translate(0.5*width,0.05*height),text("CD : With Momentum Conservation only",0,0),pop(),push(),translate(0.8*width,0.05*height),text("CD : With both Momentum & Energy Conservation",0,0),pop(),pop()}class Blob{constructor(a,b,c=data.blobs.size){this.origin=new p5.Vector(a,b),this.position=new p5.Vector(a,b),this.mass=random(1,2),this.size=c*this.mass,this.rotation=0.5>random(1)?random(10,11):random(-10,-11),this.velocity=this.origin.x<0.33*width?p5.Vector.random2D().mult(1):this.origin.x<0.66*width?p5.Vector.random2D().mult(random(2,3)):p5.Vector.random2D().mult(5),this.acceleration=new p5.Vector}run(){this.update(),this.show()}show(){push(),translate(this.position.x,this.position.y),fill(map(this.velocity.mag(),0,10,0,100),100,100),ellipse(0,0,2*this.size,2*this.size),pop()}applyForce(a){this.acceleration.add(a)}update(){switch(!0){case 0<this.position.x&&this.position.x<0.33*width:(this.position.x>0.33*width-this.size||this.position.x<this.size)&&(this.velocity.x*=-1);break;case this.position.x>0.33*width&&this.position.x<0.66*width:(this.position.x>0.66*width-this.size||this.position.x<0.33*width+this.size)&&(this.velocity.x*=-1);break;case this.position.x>0.66*width&&this.position.x<width:(this.position.x>width-this.size||this.position.x<0.66*width+this.size)&&(this.velocity.x*=-1);}(this.position.y>height-this.size||this.position.y<0.1*height+this.size)&&(this.velocity.y*=-1),this.position.add(this.velocity),this.velocity.add(this.acceleration)}collide(a){let b=p5.Vector.sub(this.position,a.position),c=b.mag();b.normalize();let d=a.velocity.mag(),e=this.velocity.mag();c<=this.size+a.size&&0<c&&(this.origin.x<0.33*width?b.mult(e):this.origin.x>0.33*width&&this.origin.x<0.7*width?b.mult(d):this.origin.x>0.66*width&&this.origin.x<1.1*width&&(b.mult(d),b.mult(0.96)),this.velocity=b.copy())}}function mousePressed(){switch(!0){case mouseX<0.32*width&&0<mouseX:blobs_1=[];for(var a=0;a<data.blobs.number;a+=1)blobs_1.push(new Blob(random(0.32*width),random(0.1*height,height)));break;case mouseX<0.66*width&&mouseX>0.33*width:blobs_2=[];for(var a=0;a<data.blobs.number;a+=1)blobs_2.push(new Blob(random(0.33*width,0.66*width),random(0.1*height,height)));break;case mouseX>0.66*width:blobs_3=[];for(var a=0;a<data.blobs.number;a+=1)blobs_3.push(new Blob(random(0.7*width,width),random(0.1*height,height)));}}